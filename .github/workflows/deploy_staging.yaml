name: Deploy

on:
    push:
        branches: [main]

jobs:
    deploy:
        name: Deploy
        runs-on: ubuntu-latest
        steps:
            - name: Checkout Code
              uses: actions/checkout@v4
            
            - name: Setup Aftman
              uses: ok-nick/setup-aftman@v0.4.2
              with:
                token: ${{ github.token }}

            - run: rojo build -o build.rbxl

            - run: rbxcloud experience publish --filename build.rbxl --place-id 94193885029110 --universe-id 8151689082 --version-type published --api-key JIiUmvPeakeaj61/Y96M5yME++gCh9B8G7rSlN6YNUjrFJSjZXlKaGJHY2lPaUpTVXpJMU5pSXNJbXRwWkNJNkluTnBaeTB5TURJeExUQTNMVEV6VkRFNE9qVXhPalE1V2lJc0luUjVjQ0k2SWtwWFZDSjkuZXlKaVlYTmxRWEJwUzJWNUlqb2lTa2xwVlcxMlVHVmhhMlZoYWpZeEwxazVOazAxZVUxRkt5dG5RMmc1UWpoSE4zSlRiRTQyV1U1VmFuSkdTbE5xSWl3aWIzZHVaWEpKWkNJNklqRTRNRGt6TkRZME16RWlMQ0poZFdRaU9pSlNiMkpzYjNoSmJuUmxjbTVoYkNJc0ltbHpjeUk2SWtOc2IzVmtRWFYwYUdWdWRHbGpZWFJwYjI1VFpYSjJhV05sSWl3aVpYaHdJam94TnpVeU5ESTFOVFE1TENKcFlYUWlPakUzTlRJME1qRTVORGtzSW01aVppSTZNVGMxTWpReU1UazBPWDAubUtTNUpyZUdtVl9vTDhlcmNUSjEwbWJTODhnQ29KLTZfVkJoTzBBazloVjdqX05HbnRTTE5HaFBNcnRiNTY3SUU5OXhPUlA3Skc5eWJwQnFSQ1RrS3JnNVpadENpS2hoUnMyTGloZkpwWjBmcThOSDU4V3Z5dm1ucU1XelBVeW1WQXlhWGRHYXhxY1ZqSlU4WkhRdzFCbU9idF96d0RCUXp5dHd5Ny1rdTRmNmZoWllOMWNkMHBZZHB6VG1FS1NxdEtFSG9ibUJYUEpXRzI0elNMQ3h0dEM2ZEt1ZXhQMzlZaU5HZmg0UW4yQ2g3aTY3M3ptcTlYS0FtbGFYa005UWZ5anF6VjFURHUxei11WWt2RlJQdUpDM1N4c2h0dEU2ZjVtdzdZMzVGRm9lSG5faW82UGRRSnhreHFLZk1LeG9ualZHbUUwYkt2c3ltd0lWR0lyZXl